{"version":3,"sources":["../../src/html-flip-book/index.tsx","../node_modules/page-flip/dist/js/page-flip.browser.js"],"names":["HTMLFlipBookForward","forwardRef","props","ref","htmlElementRef","childRef","pages","setPages","pageFlip","current","refreshOnPageDelete","clear","removeHandlers","flip","off","children","childList","Children","map","child","cloneElement","dom","push","renderOnlyPageLengthChange","length","getFlipController","updateFromHtml","loadFromHTML","onFlip","on","e","onChangeOrientation","onChangeState","onInit","onUpdate","setHandlers","className","style","HTMLFlipBook","memo","t","this","state","angle","area","position","x","y","hardAngle","hardDrawingAngle","createdDensity","nowDrawingDensity","render","orientation","i","image","isLoad","loadingAngle","Image","src","getContext","convertToGlobal","s","getRect","pageWidth","n","height","save","translate","beginPath","lineTo","rotate","clip","drawImage","drawLoader","restore","h","left","r","top","strokeStyle","fillStyle","lineWidth","rect","stroke","fill","arc","Math","PI","closePath","onload","currentPageIndex","currentSpreadIndex","landscapeSpread","portraitSpread","app","isShowCover","getSettings","showCover","setDensity","getOrientation","getSpread","Error","indexOf","newTemporaryCopy","showSpread","getSpreadIndexByPage","setLeftPage","setRightPage","updatePageIndex","imagesHref","load","createSpread","sqrt","pow","GetDistanceBetweenTwoPoint","acos","width","cos","sin","o","a","g","PointInRect","GetIntersectBeetwenTwoLine","l","d","isFinite","abs","max","copiedElement","temporaryCopy","element","classList","add","cloneNode","parentElement","appendChild","getTemporaryCopy","remove","zIndex","drawHard","drawSoft","cssText","getDirection","GetRotatedPoint","slice","isSafari","startZIndex","pagesElement","dataset","density","direction","corner","topIntersectPoint","sideIntersectPoint","bottomIntersectPoint","parseInt","pageHeight","calcAngleAndPosition","calculateIntersectPoint","topLeft","bottomLeft","topRight","GetAngleBetweenTwoLine","getSegmentToShadowLine","updateAngleAndGeometry","checkPositionAtCenterLine","calculateAngle","getPageRect","getRectFromBasePoint","getRotatedPoint","bottomRight","GetIntersectBetweenTwoSegment","LimitPointToCircle","getShadowStartPoint","flippingPage","bottomPage","calc","setState","start","do","convertToPage","disableFlipByClick","isPointOnCorners","finishAnimation","getBoundsRect","getCorner","animateFlippingTo","reset","convertToBook","getDirectionByPoint","checkDirection","getPageCollection","getFlippingPage","getBottomPage","nextBy","getDensity","setDrawingDensity","prevBy","setDirection","toString","getFlippingProgress","setArea","getBottomClipArea","setPosition","getBottomPagePosition","setAngle","setHardAngle","getFlippingClipArea","getActiveCorner","getAngle","setPageRect","setBottomPage","setFlippingPage","setShadowData","getShadowAngle","getCurrentSpreadIndex","setCurrentSpreadIndex","flipNext","flipPrev","getPosition","checkState","stopMove","GetCordsFromTwoPoint","getAnimationDuration","startAnimation","turnToPrevPage","turnToNextPage","clearShadow","updateState","flippingTime","getCurrentPageIndex","getPageCount","leftPage","rightPage","shadow","animation","pageRect","boundsRect","timer","safari","setting","RegExp","exec","window","navigator","userAgent","round","startedAt","durationFrame","frames","onAnimateEnd","drawFrame","update","requestAnimationFrame","duration","calculateBoundsRect","updateOrientation","getBlockWidth","getBlockHeight","size","minWidth","usePortrait","maxWidth","drawShadow","maxShadowOpacity","pos","opacity","progress","getUI","getDistElement","offsetWidth","offsetHeight","setOrientation","canvas","ctx","simpleDraw","draw","drawBookShadow","drawOuterShadow","drawInnerShadow","createLinearGradient","addColorStop","fillRect","convertRectToGlobal","moveTo","p","touchPoint","swipeTimeout","onResize","onMouseDown","checkTarget","target","getMousePos","clientX","clientY","startUserTouch","preventDefault","onTouchStart","changedTouches","point","time","Date","now","setTimeout","mobileScrollSupport","onMouseUp","userStop","onMouseMove","userMove","onTouchMove","getState","cancelable","onTouchEnd","swipeDistance","getRender","insertAdjacentHTML","wrapper","querySelector","minHeight","autoSize","display","addEventListener","useMouseEvents","distElement","paddingBottom","removeEventListener","passive","getBoundingClientRect","clickEventForward","includes","tagName","toLowerCase","c","items","innerHTML","u","querySelectorAll","resizeCanvas","getComputedStyle","getPropertyValue","w","outerShadow","innerShadow","hardShadow","hardInnerShadow","createShadows","getDrawingDensity","getElement","setHardDrawingAngle","getHardAngle","drawLeftPage","drawRightPage","drawBottomPage","drawHardOuterShadow","drawHardInnerShadow","getPages","hideTemporaryCopy","_default","startPage","maxHeight","showPageCorners","Object","assign","insertAt","document","head","getElementsByTagName","createElement","type","firstChild","insertBefore","styleSheet","createTextNode","PageFlip","isUserTouch","isUserMove","block","ui","destroy","show","getCanvas","flipController","trigger","page","mode","updateItems","reload","showPrev","showNext","flipToPage","setOrientationStyle","getPage","mousePosition","fold","showCorner","events","Map","has","get","set","delete","data","object","defineProperty","value","exports"],"mappings":"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","file":"static/js/12.ea079f13.chunk.js","sourcesContent":["import React, {\n    ReactElement,\n    useCallback,\n    useEffect,\n    useImperativeHandle,\n    useRef,\n    useState,\n} from 'react';\n\nimport { PageFlip } from 'page-flip';\nimport { IFlipSetting, IEventProps } from './settings';\n\ninterface IProps extends IFlipSetting, IEventProps {\n    className: string;\n    style: React.CSSProperties;\n    children: React.ReactNode;\n    renderOnlyPageLengthChange?: boolean;\n}\n\nconst HTMLFlipBookForward = React.forwardRef(\n    (props: IProps, ref: React.MutableRefObject<PageFlip>) => {\n        const htmlElementRef = useRef<HTMLDivElement>(null);\n        const childRef = useRef<HTMLElement[]>([]);\n        const pageFlip = useRef<PageFlip>();\n\n        const [pages, setPages] = useState<ReactElement[]>([]);\n\n        useImperativeHandle(ref, () => ({\n            pageFlip: () => pageFlip.current,\n        }));\n\n        const refreshOnPageDelete = useCallback(() => {\n            if (pageFlip.current) {\n                pageFlip.current.clear();\n            }\n        }, []);\n\n        const removeHandlers = useCallback(() => {\n            const flip = pageFlip.current;\n\n            if (flip) {\n                flip.off('flip');\n                flip.off('changeOrientation');\n                flip.off('changeState');\n                flip.off('init');\n                flip.off('update');\n            }\n        }, []);\n\n        useEffect(() => {\n            childRef.current = [];\n\n            if (props.children) {\n                const childList = React.Children.map(props.children, (child) => {\n                    return React.cloneElement(child as ReactElement, {\n                        ref: (dom) => {\n                            if (dom) {\n                                childRef.current.push(dom);\n                            }\n                        },\n                    });\n                });\n\n                if (!props.renderOnlyPageLengthChange || pages.length !== childList.length) {\n                    if (childList.length < pages.length) {\n                        refreshOnPageDelete();\n                    }\n\n                    setPages(childList);\n                }\n            }\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n        }, [props.children]);\n\n        useEffect(() => {\n            const setHandlers = () => {\n                const flip = pageFlip.current;\n\n                if (flip) {\n                    if (props.onFlip) {\n                        flip.on('flip', (e: unknown) => props.onFlip(e));\n                    }\n\n                    if (props.onChangeOrientation) {\n                        flip.on('changeOrientation', (e: unknown) => props.onChangeOrientation(e));\n                    }\n\n                    if (props.onChangeState) {\n                        flip.on('changeState', (e: unknown) => props.onChangeState(e));\n                    }\n\n                    if (props.onInit) {\n                        flip.on('init', (e: unknown) => props.onInit(e));\n                    }\n\n                    if (props.onUpdate) {\n                        flip.on('update', (e: unknown) => props.onUpdate(e));\n                    }\n                }\n            };\n\n            if (pages.length > 0 && childRef.current.length > 0) {\n                removeHandlers();\n\n                if (htmlElementRef.current && !pageFlip.current) {\n                    pageFlip.current = new PageFlip(htmlElementRef.current, props);\n                }\n\n                if (!pageFlip.current.getFlipController()) {\n                    pageFlip.current.loadFromHTML(childRef.current);\n                } else {\n                    pageFlip.current.updateFromHtml(childRef.current);\n                }\n\n                setHandlers();\n            }\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n        }, [pages]);\n\n        return (\n            <div ref={htmlElementRef} className={props.className} style={props.style}>\n                {pages}\n            </div>\n        );\n    }\n);\n\nexport const HTMLFlipBook = React.memo(HTMLFlipBookForward);\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?e(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],e):e((t=t||self).St={})}(this,(function(t){\"use strict\";class e{constructor(t,e){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=e,this.nowDrawingDensity=this.createdDensity,this.render=t}setDensity(t){this.createdDensity=t,this.nowDrawingDensity=t}setDrawingDensity(t){this.nowDrawingDensity=t}setPosition(t){this.state.position=t}setAngle(t){this.state.angle=t}setArea(t){this.state.area=t}setHardDrawingAngle(t){this.state.hardDrawingAngle=t}setHardAngle(t){this.state.hardAngle=t,this.state.hardDrawingAngle=t}setOrientation(t){this.orientation=t}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends e{constructor(t,e,i){super(t,i),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=e}draw(t){const e=this.render.getContext(),i=this.render.convertToGlobal(this.state.position),s=this.render.getRect().pageWidth,n=this.render.getRect().height;e.save(),e.translate(i.x,i.y),e.beginPath();for(let t of this.state.area)null!==t&&(t=this.render.convertToGlobal(t),e.lineTo(t.x-i.x,t.y-i.y));e.rotate(this.state.angle),e.clip(),this.isLoad?e.drawImage(this.image,0,0,s,n):this.drawLoader(e,{x:0,y:0},s,n),e.restore()}simpleDraw(t){const e=this.render.getRect(),i=this.render.getContext(),s=e.pageWidth,n=e.height,h=1===t?e.left+e.pageWidth:e.left,r=e.top;this.isLoad?i.drawImage(this.image,h,r,s,n):this.drawLoader(i,{x:h,y:r},s,n)}drawLoader(t,e,i,s){t.beginPath(),t.strokeStyle=\"rgb(200, 200, 200)\",t.fillStyle=\"rgb(255, 255, 255)\",t.lineWidth=1,t.rect(e.x+1,e.y+1,i-1,s-1),t.stroke(),t.fill();const n={x:e.x+i/2,y:e.y+s/2};t.beginPath(),t.lineWidth=10,t.arc(n.x,n.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),t.stroke(),t.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class s{constructor(t,e){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=e,this.app=t,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let t=0;t<this.pages.length;t++)this.portraitSpread.push([t]);let t=0;this.isShowCover&&(this.pages[0].setDensity(\"hard\"),this.landscapeSpread.push([t]),t++);for(let e=t;e<this.pages.length;e+=2)e<this.pages.length-1?this.landscapeSpread.push([e,e+1]):(this.landscapeSpread.push([e]),this.pages[e].setDensity(\"hard\"))}getSpread(){return\"landscape\"===this.render.getOrientation()?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(t){const e=this.getSpread();for(let i=0;i<e.length;i++)if(t===e[i][0]||t===e[i][1])return i;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(t){if(t>=0&&t<this.pages.length)return this.pages[t];throw new Error(\"Invalid page number\")}nextBy(t){const e=this.pages.indexOf(t);return e<this.pages.length-1?this.pages[e+1]:null}prevBy(t){const e=this.pages.indexOf(t);return e>0?this.pages[e-1]:null}getFlippingPage(t){const e=this.currentSpreadIndex;if(\"portrait\"===this.render.getOrientation())return 0===t?this.pages[e].newTemporaryCopy():this.pages[e-1];{const i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length||0===t?this.pages[i[0]]:this.pages[i[1]]}}getBottomPage(t){const e=this.currentSpreadIndex;if(\"portrait\"===this.render.getOrientation())return 0===t?this.pages[e+1]:this.pages[e-1];{const i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length?this.pages[i[0]]:0===t?this.pages[i[1]]:this.pages[i[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(t=null){if(null===t&&(t=this.currentPageIndex),t<0||t>=this.pages.length)return;const e=this.getSpreadIndexByPage(t);null!==e&&(this.currentSpreadIndex=e,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(t){if(!(t>=0&&t<this.getSpread().length))throw new Error(\"Invalid page\");this.currentSpreadIndex=t}showSpread(){const t=this.getSpread()[this.currentSpreadIndex];2===t.length?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(this.pages[t[1]])):\"landscape\"===this.render.getOrientation()&&t[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[t[0]])),this.currentPageIndex=t[0],this.app.updatePageIndex(this.currentPageIndex)}}class n extends s{constructor(t,e,i){super(t,e),this.imagesHref=i}load(){for(const t of this.imagesHref){const e=new i(this.render,t,\"soft\");e.load(),this.pages.push(e)}this.createSpread()}}class h{static GetDistanceBetweenTwoPoint(t,e){return null===t||null===e?1/0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}static GetSegmentLength(t){return h.GetDistanceBetweenTwoPoint(t[0],t[1])}static GetAngleBetweenTwoLine(t,e){const i=t[0].y-t[1].y,s=e[0].y-e[1].y,n=t[1].x-t[0].x,h=e[1].x-e[0].x;return Math.acos((i*s+n*h)/(Math.sqrt(i*i+n*n)*Math.sqrt(s*s+h*h)))}static PointInRect(t,e){return null===e?null:e.x>=t.left&&e.x<=t.width+t.left&&e.y>=t.top&&e.y<=t.top+t.height?e:null}static GetRotatedPoint(t,e,i){return{x:t.x*Math.cos(i)+t.y*Math.sin(i)+e.x,y:t.y*Math.cos(i)-t.x*Math.sin(i)+e.y}}static LimitPointToCircle(t,e,i){if(h.GetDistanceBetweenTwoPoint(t,i)<=e)return i;const s=t.x,n=t.y,r=i.x,o=i.y;let a=Math.sqrt(Math.pow(e,2)*Math.pow(s-r,2)/(Math.pow(s-r,2)+Math.pow(n-o,2)))+s;i.x<0&&(a*=-1);let g=(a-s)*(n-o)/(s-r)+n;return s-r+n===0&&(g=e),{x:a,y:g}}static GetIntersectBetweenTwoSegment(t,e,i){return h.PointInRect(t,h.GetIntersectBeetwenTwoLine(e,i))}static GetIntersectBeetwenTwoLine(t,e){const i=t[0].y-t[1].y,s=e[0].y-e[1].y,n=t[1].x-t[0].x,h=e[1].x-e[0].x,r=t[0].x*t[1].y-t[1].x*t[0].y,o=e[0].x*e[1].y-e[1].x*e[0].y,a=i*o-s*r,g=n*o-h*r,l=-(r*h-o*n)/(i*h-s*n),d=-(i*o-s*r)/(i*h-s*n);if(isFinite(l)&&isFinite(d))return{x:l,y:d};if(Math.abs(a-g)<.1)throw new Error(\"Segment included\");return null}static GetCordsFromTwoPoint(t,e){const i=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y),n=Math.max(i,s),h=[t];function r(t,e,i,s,n){return e>t?t+n*(i/s):e<t?t-n*(i/s):t}for(let o=1;o<=n;o+=1)h.push({x:r(t.x,e.x,i,n,o),y:r(t.y,e.y,s,n,o)});return h}}class r extends e{constructor(t,e,i){super(t,i),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=e,this.element.classList.add(\"stf__item\"),this.element.classList.add(\"--\"+i)}newTemporaryCopy(){return\"hard\"===this.nowDrawingDensity?this:(null===this.temporaryCopy&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new r(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){null!==this.temporaryCopy&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(t){const e=t||this.nowDrawingDensity,i=this.render.convertToGlobal(this.state.position),s=this.render.getRect().pageWidth,n=this.render.getRect().height;this.element.classList.remove(\"--simple\");const h=`\\n            display: block;\\n            z-index: ${this.element.style.zIndex};\\n            left: 0;\\n            top: 0;\\n            width: ${s}px;\\n            height: ${n}px;\\n        `;\"hard\"===e?this.drawHard(h):this.drawSoft(i,h)}drawHard(t=\"\"){const e=this.render.getRect().left+this.render.getRect().width/2,i=this.state.hardDrawingAngle,s=t+\"\\n                backface-visibility: hidden;\\n                -webkit-backface-visibility: hidden;\\n                clip-path: none;\\n                -webkit-clip-path: none;\\n            \"+(0===this.orientation?`transform-origin: ${this.render.getRect().pageWidth}px 0; \\n                   transform: translate3d(0, 0, 0) rotateY(${i}deg);`:`transform-origin: 0 0; \\n                   transform: translate3d(${e}px, 0, 0) rotateY(${i}deg);`);this.element.style.cssText=s}drawSoft(t,e=\"\"){let i=\"polygon( \";for(const t of this.state.area)if(null!==t){let e=1===this.render.getDirection()?{x:-t.x+this.state.position.x,y:t.y-this.state.position.y}:{x:t.x-this.state.position.x,y:t.y-this.state.position.y};e=h.GetRotatedPoint(e,{x:0,y:0},this.state.angle),i+=e.x+\"px \"+e.y+\"px, \"}i=i.slice(0,-2),i+=\")\";const s=e+`transform-origin: 0 0; clip-path: ${i}; -webkit-clip-path: ${i};`+(this.render.isSafari()&&0===this.state.angle?`transform: translate(${t.x}px, ${t.y}px);`:`transform: translate3d(${t.x}px, ${t.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=s}simpleDraw(t){const e=this.render.getRect(),i=e.pageWidth,s=e.height,n=1===t?e.left+e.pageWidth:e.left,h=e.top;this.element.classList.add(\"--simple\"),this.element.style.cssText=`\\n            position: absolute; \\n            display: block; \\n            height: ${s}px; \\n            left: ${n}px; \\n            top: ${h}px; \\n            width: ${i}px; \\n            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(t){super.setOrientation(t),this.element.classList.remove(\"--left\",\"--right\"),this.element.classList.add(1===t?\"--right\":\"--left\")}setDrawingDensity(t){this.element.classList.remove(\"--soft\",\"--hard\"),this.element.classList.add(\"--\"+t),super.setDrawingDensity(t)}}class o extends s{constructor(t,e,i,s){super(t,e),this.element=i,this.pagesElement=s}load(){for(const t of this.pagesElement){const e=new r(this.render,t,\"hard\"===t.dataset.density?\"hard\":\"soft\");e.load(),this.pages.push(e)}this.createSpread()}}class a{constructor(t,e,i,s){this.direction=t,this.corner=e,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(i,10),this.pageHeight=parseInt(s,10)}calc(t){try{return this.position=this.calcAngleAndPosition(t),this.calculateIntersectPoint(this.position),!0}catch(t){return!1}}getFlippingClipArea(){const t=[];let e=!1;return t.push(this.rect.topLeft),t.push(this.topIntersectPoint),null===this.sideIntersectPoint?e=!0:(t.push(this.sideIntersectPoint),null===this.bottomIntersectPoint&&(e=!1)),t.push(this.bottomIntersectPoint),(e||\"bottom\"===this.corner)&&t.push(this.rect.bottomLeft),t}getBottomClipArea(){const t=[];return t.push(this.topIntersectPoint),\"top\"===this.corner?t.push({x:this.pageWidth,y:0}):(null!==this.topIntersectPoint&&t.push({x:this.pageWidth,y:0}),t.push({x:this.pageWidth,y:this.pageHeight})),null!==this.sideIntersectPoint?h.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&t.push(this.sideIntersectPoint):\"top\"===this.corner&&t.push({x:this.pageWidth,y:this.pageHeight}),t.push(this.bottomIntersectPoint),t.push(this.topIntersectPoint),t}getAngle(){return 0===this.direction?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return 0===this.direction?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return 1===this.direction?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return\"top\"===this.corner?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const t=h.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return 0===this.direction?t:Math.PI-t}calcAngleAndPosition(t){let e=t;if(this.updateAngleAndGeometry(e),e=\"top\"===this.corner?this.checkPositionAtCenterLine(e,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(e,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(e.x-this.pageWidth)<1&&Math.abs(e.y)<1)throw new Error(\"Point is too small\");return e}updateAngleAndGeometry(t){this.angle=this.calculateAngle(t),this.rect=this.getPageRect(t)}calculateAngle(t){const e=this.pageWidth-t.x+1,i=\"bottom\"===this.corner?this.pageHeight-t.y:t.y;let s=2*Math.acos(e/Math.sqrt(i*i+e*e));i<0&&(s=-s);const n=Math.PI-s;if(!isFinite(s)||n>=0&&n<.003)throw new Error(\"The G point is too small\");return\"bottom\"===this.corner&&(s=-s),s}getPageRect(t){return\"top\"===this.corner?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],t):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],t)}getRectFromBasePoint(t,e){return{topLeft:this.getRotatedPoint(t[0],e),topRight:this.getRotatedPoint(t[1],e),bottomLeft:this.getRotatedPoint(t[2],e),bottomRight:this.getRotatedPoint(t[3],e)}}getRotatedPoint(t,e){return{x:t.x*Math.cos(this.angle)+t.y*Math.sin(this.angle)+e.x,y:t.y*Math.cos(this.angle)-t.x*Math.sin(this.angle)+e.y}}calculateIntersectPoint(t){const e={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};\"top\"===this.corner?(this.topIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(t,e,i){let s=t;const n=h.LimitPointToCircle(e,this.pageWidth,s);s!==n&&(s=n,this.updateAngleAndGeometry(s));const r=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let o=this.rect.bottomRight,a=this.rect.topLeft;if(\"bottom\"===this.corner&&(o=this.rect.topRight,a=this.rect.bottomLeft),o.x<=0){const t=h.LimitPointToCircle(i,r,a);t!==s&&(s=t,this.updateAngleAndGeometry(s))}return s}getSegmentToShadowLine(){const t=this.getShadowStartPoint();return[t,t!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}}class g{constructor(t,e){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state=\"read\",this.render=t,this.app=e}fold(t){this.setState(\"user_fold\"),null===this.calc&&this.start(t),this.do(this.render.convertToPage(t))}flip(t){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(t))return;if(null!==this.calc&&this.render.finishAnimation(),!this.start(t))return;const e=this.getBoundsRect();this.setState(\"flipping\");const i=e.height/10,s=\"bottom\"===this.calc.getCorner()?e.height-i:i,n=\"bottom\"===this.calc.getCorner()?e.height:0;this.calc.calc({x:e.pageWidth-i,y:s}),this.animateFlippingTo({x:e.pageWidth-i,y:s},{x:-e.pageWidth,y:n},!0)}start(t){this.reset();const e=this.render.convertToBook(t),i=this.getBoundsRect(),s=this.getDirectionByPoint(e),n=e.y>=i.height/2?\"bottom\":\"top\";if(!this.checkDirection(s))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(s),this.bottomPage=this.app.getPageCollection().getBottomPage(s),\"landscape\"===this.render.getOrientation())if(1===s){const t=this.app.getPageCollection().nextBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity(\"hard\"),t.setDrawingDensity(\"hard\"))}else{const t=this.app.getPageCollection().prevBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity(\"hard\"),t.setDrawingDensity(\"hard\"))}return this.render.setDirection(s),this.calc=new a(s,n,i.pageWidth.toString(10),i.height.toString(10)),!0}catch(t){return!1}}do(t){if(null!==this.calc&&this.calc.calc(t)){const t=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),0===this.calc.getDirection()?this.flippingPage.setHardAngle(90*(200-2*t)/100):this.flippingPage.setHardAngle(-90*(200-2*t)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),t,this.calc.getDirection())}}flipToPage(t,e){const i=this.app.getPageCollection().getCurrentSpreadIndex(),s=this.app.getPageCollection().getSpreadIndexByPage(t);try{s>i&&(this.app.getPageCollection().setCurrentSpreadIndex(s-1),this.flipNext(e)),s<i&&(this.app.getPageCollection().setCurrentSpreadIndex(s+1),this.flipPrev(e))}catch(t){}}flipNext(t){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:\"top\"===t?1:this.render.getRect().height-2})}flipPrev(t){this.flip({x:10,y:\"top\"===t?1:this.render.getRect().height-2})}stopMove(){if(null===this.calc)return;const t=this.calc.getPosition(),e=this.getBoundsRect(),i=\"bottom\"===this.calc.getCorner()?e.height:0;t.x<=0?this.animateFlippingTo(t,{x:-e.pageWidth,y:i},!0):this.animateFlippingTo(t,{x:e.pageWidth,y:i},!1)}showCorner(t){if(!this.checkState(\"read\",\"fold_corner\"))return;const e=this.getBoundsRect(),i=e.pageWidth;if(this.isPointOnCorners(t))if(null===this.calc){if(!this.start(t))return;this.setState(\"fold_corner\"),this.calc.calc({x:i-1,y:1});const s=50,n=\"bottom\"===this.calc.getCorner()?e.height-1:1,h=\"bottom\"===this.calc.getCorner()?e.height-s:s;this.animateFlippingTo({x:i-1,y:n},{x:i-s,y:h},!1,!1)}else this.do(this.render.convertToPage(t));else this.setState(\"read\"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(t,e,i,s=!0){const n=h.GetCordsFromTwoPoint(t,e),r=[];for(const t of n)r.push(()=>this.do(t));const o=this.getAnimationDuration(n.length);this.render.startAnimation(r,o,()=>{this.calc&&(i&&(1===this.calc.getDirection()?this.app.turnToPrevPage():this.app.turnToNextPage()),s&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState(\"read\"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(t){this.state!==t&&(this.app.updateState(t),this.state=t)}getDirectionByPoint(t){const e=this.getBoundsRect();if(\"portrait\"===this.render.getOrientation()){if(t.x-e.pageWidth<=e.width/5)return 1}else if(t.x<e.width/2)return 1;return 0}getAnimationDuration(t){const e=this.app.getSettings().flippingTime;return t>=1e3?e:t/1e3*e}checkDirection(t){return 0===t?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...t){for(const e of t)if(this.state===e)return!0;return!1}isPointOnCorners(t){const e=this.getBoundsRect(),i=e.pageWidth,s=Math.sqrt(Math.pow(i,2)+Math.pow(e.height,2))/5,n=this.render.convertToBook(t);return n.x>0&&n.y>0&&n.x<e.width&&n.y<e.height&&(n.x<s||n.x>e.width-s)&&(n.y<s||n.y>e.height-s)}}class l{constructor(t,e){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=e,this.app=t;const i=new RegExp(\"Version\\\\/[\\\\d\\\\.]+.*Safari/\");this.safari=null!==i.exec(window.navigator.userAgent)}render(t){if(null!==this.animation){const e=Math.round((t-this.animation.startedAt)/this.animation.durationFrame);e<this.animation.frames.length?this.animation.frames[e]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=t,this.drawFrame()}start(){this.update();const t=e=>{this.render(e),requestAnimationFrame(t)};requestAnimationFrame(t)}startAnimation(t,e,i){this.finishAnimation(),this.animation={frames:t,duration:e,durationFrame:e/t.length,onAnimateEnd:i,startedAt:this.timer}}finishAnimation(){null!==this.animation&&(this.animation.frames[this.animation.frames.length-1](),null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const t=this.calculateBoundsRect();this.orientation!==t&&(this.orientation=t,this.app.updateOrientation(t))}calculateBoundsRect(){let t=\"landscape\";const e=this.getBlockWidth(),i=e/2,s=this.getBlockHeight()/2,n=this.setting.width/this.setting.height;let h=this.setting.width,r=this.setting.height,o=i-h;return\"stretch\"===this.setting.size?(e<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(t=\"portrait\"),h=\"portrait\"===t?this.getBlockWidth():this.getBlockWidth()/2,h>this.setting.maxWidth&&(h=this.setting.maxWidth),r=h/n,r>this.getBlockHeight()&&(r=this.getBlockHeight(),h=r*n),o=\"portrait\"===t?i-h/2-h:i-h):e<2*h&&this.app.getSettings().usePortrait&&(t=\"portrait\",o=i-h/2-h),this.boundsRect={left:o,top:s-r/2,width:2*h,height:r,pageWidth:h},t}setShadowData(t,e,i,s){if(!this.app.getSettings().drawShadow)return;const n=100*this.getSettings().maxShadowOpacity;this.shadow={pos:t,angle:e,width:3*this.getRect().pageWidth/4*i/100,opacity:(100-i)*n/100/100,direction:s,progress:2*i}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return null===this.boundsRect&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(t){this.pageRect=t}setDirection(t){this.direction=t}setRightPage(t){null!==t&&t.setOrientation(1),this.rightPage=t}setLeftPage(t){null!==t&&t.setOrientation(0),this.leftPage=t}setBottomPage(t){null!==t&&t.setOrientation(1===this.direction?0:1),this.bottomPage=t}setFlippingPage(t){null!==t&&t.setOrientation(0===this.direction&&\"portrait\"!==this.orientation?0:1),this.flippingPage=t}convertToBook(t){const e=this.getRect();return{x:t.x-e.left,y:t.y-e.top}}isSafari(){return this.safari}convertToPage(t,e){e||(e=this.direction);const i=this.getRect();return{x:0===e?t.x-i.left-i.width/2:i.width/2-t.x+i.left,y:t.y-i.top}}convertToGlobal(t,e){if(e||(e=this.direction),null==t)return null;const i=this.getRect();return{x:0===e?t.x+i.left+i.width/2:i.width/2-t.x+i.left,y:t.y+i.top}}convertRectToGlobal(t,e){return e||(e=this.direction),{topLeft:this.convertToGlobal(t.topLeft,e),topRight:this.convertToGlobal(t.topRight,e),bottomLeft:this.convertToGlobal(t.bottomLeft,e),bottomRight:this.convertToGlobal(t.bottomRight,e)}}}class d extends l{constructor(t,e,i){super(t,e),this.canvas=i,this.ctx=i.getContext(\"2d\")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),\"portrait\"!==this.orientation&&null!=this.leftPage&&this.leftPage.simpleDraw(0),null!=this.rightPage&&this.rightPage.simpleDraw(1),null!=this.bottomPage&&this.bottomPage.draw(),this.drawBookShadow(),null!=this.flippingPage&&this.flippingPage.draw(),null!=this.shadow&&(this.drawOuterShadow(),this.drawInnerShadow());const t=this.getRect();\"portrait\"===this.orientation&&(this.ctx.beginPath(),this.ctx.rect(t.left+t.pageWidth,t.top,t.width,t.height),this.ctx.clip())}drawBookShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=t.width/20;this.ctx.rect(t.left,t.top,t.width,t.height);const i={x:t.left+t.width/2-e/2,y:0};this.ctx.translate(i.x,i.y);const s=this.ctx.createLinearGradient(0,0,e,0);s.addColorStop(0,\"rgba(0, 0, 0, 0)\"),s.addColorStop(.4,\"rgba(0, 0, 0, 0.2)\"),s.addColorStop(.49,\"rgba(0, 0, 0, 0.1)\"),s.addColorStop(.5,\"rgba(0, 0, 0, 0.5)\"),s.addColorStop(.51,\"rgba(0, 0, 0, 0.4)\"),s.addColorStop(1,\"rgba(0, 0, 0, 0)\"),this.ctx.clip(),this.ctx.fillStyle=s,this.ctx.fillRect(0,0,e,2*t.height),this.ctx.restore()}drawOuterShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t.left,t.top,t.width,t.height);const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const i=this.ctx.createLinearGradient(0,0,this.shadow.width,0);0===this.shadow.direction?(this.ctx.translate(0,-100),i.addColorStop(0,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),i.addColorStop(1,\"rgba(0, 0, 0, 0)\")):(this.ctx.translate(-this.shadow.width,-100),i.addColorStop(0,\"rgba(0, 0, 0, 0)\"),i.addColorStop(1,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\")),this.ctx.clip(),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,this.shadow.width,2*t.height),this.ctx.restore()}drawInnerShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(i.topLeft.x,i.topLeft.y),this.ctx.lineTo(i.topRight.x,i.topRight.y),this.ctx.lineTo(i.bottomRight.x,i.bottomRight.y),this.ctx.lineTo(i.bottomLeft.x,i.bottomLeft.y),this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const s=3*this.shadow.width/4,n=this.ctx.createLinearGradient(0,0,s,0);0===this.shadow.direction?(this.ctx.translate(-s,-100),n.addColorStop(1,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(.9,\"rgba(0, 0, 0, 0.05)\"),n.addColorStop(.7,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(0,\"rgba(0, 0, 0, 0)\")):(this.ctx.translate(0,-100),n.addColorStop(0,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(.1,\"rgba(0, 0, 0, 0.05)\"),n.addColorStop(.3,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(1,\"rgba(0, 0, 0, 0)\")),this.ctx.clip(),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,s,2*t.height),this.ctx.restore()}clear(){this.ctx.fillStyle=\"white\",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class p{constructor(t,e,i){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=t=>{if(this.checkTarget(t.target)){const e=this.getMousePos(t.clientX,t.clientY);this.app.startUserTouch(e),t.preventDefault()}},this.onTouchStart=t=>{if(this.checkTarget(t.target)&&t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.touchPoint={point:i,time:Date.now()},setTimeout(()=>{null!==this.touchPoint&&this.app.startUserTouch(i)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||t.preventDefault()}},this.onMouseUp=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userStop(e)},this.onMouseMove=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userMove(e,!1)},this.onTouchMove=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.app.getSettings().mobileScrollSupport?(null!==this.touchPoint&&(Math.abs(this.touchPoint.point.x-i.x)>10||\"read\"!==this.app.getState())&&t.cancelable&&this.app.userMove(i,!0),\"read\"!==this.app.getState()&&t.preventDefault()):this.app.userMove(i,!0)}},this.onTouchEnd=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);let s=!1;if(null!==this.touchPoint){const t=i.x-this.touchPoint.point.x,e=Math.abs(i.y-this.touchPoint.point.y);Math.abs(t)>this.swipeDistance&&e<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(t>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?\"top\":\"bottom\"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?\"top\":\"bottom\"),s=!0),this.touchPoint=null}this.app.userStop(i,s)}},this.parentElement=t,t.classList.add(\"stf__parent\"),t.insertAdjacentHTML(\"afterbegin\",'<div class=\"stf__wrapper\"></div>'),this.wrapper=t.querySelector(\".stf__wrapper\"),this.app=e;const s=this.app.getSettings().usePortrait?1:2;t.style.minWidth=i.minWidth*s+\"px\",t.style.minHeight=i.minHeight+\"px\",\"fixed\"===i.size&&(t.style.minWidth=i.width*s+\"px\",t.style.minHeight=i.height+\"px\"),i.autoSize&&(t.style.width=\"100%\",t.style.maxWidth=2*i.maxWidth+\"px\"),t.style.display=\"block\",window.addEventListener(\"resize\",this.onResize,!1),this.swipeDistance=i.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(t){this.wrapper.classList.remove(\"--portrait\",\"--landscape\"),\"portrait\"===t?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+\"%\"),this.wrapper.classList.add(\"--portrait\")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+\"%\"),this.wrapper.classList.add(\"--landscape\")),this.update()}removeHandlers(){window.removeEventListener(\"resize\",this.onResize),this.distElement.removeEventListener(\"mousedown\",this.onMouseDown),this.distElement.removeEventListener(\"touchstart\",this.onTouchStart),window.removeEventListener(\"mousemove\",this.onMouseMove),window.removeEventListener(\"touchmove\",this.onTouchMove),window.removeEventListener(\"mouseup\",this.onMouseUp),window.removeEventListener(\"touchend\",this.onTouchEnd)}setHandlers(){window.addEventListener(\"resize\",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener(\"mousedown\",this.onMouseDown),this.distElement.addEventListener(\"touchstart\",this.onTouchStart),window.addEventListener(\"mousemove\",this.onMouseMove),window.addEventListener(\"touchmove\",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener(\"mouseup\",this.onMouseUp),window.addEventListener(\"touchend\",this.onTouchEnd))}getMousePos(t,e){const i=this.distElement.getBoundingClientRect();return{x:t-i.left,y:e-i.top}}checkTarget(t){return!this.app.getSettings().clickEventForward||![\"a\",\"button\"].includes(t.tagName.toLowerCase())}}class c extends p{constructor(t,e,i,s){super(t,e,i),this.wrapper.insertAdjacentHTML(\"afterbegin\",'<div class=\"stf__block\"></div>'),this.distElement=t.querySelector(\".stf__block\"),this.items=s;for(const t of s)this.distElement.appendChild(t);this.setHandlers()}clear(){for(const t of this.items)this.parentElement.appendChild(t)}updateItems(t){this.removeHandlers(),this.distElement.innerHTML=\"\";for(const e of t)this.distElement.appendChild(e);this.items=t,this.setHandlers()}update(){this.app.getRender().update()}}class u extends p{constructor(t,e,i){super(t,e,i),this.wrapper.innerHTML='<canvas class=\"stf__canvas\"></canvas>',this.canvas=t.querySelectorAll(\"canvas\")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const t=getComputedStyle(this.canvas),e=parseInt(t.getPropertyValue(\"width\"),10),i=parseInt(t.getPropertyValue(\"height\"),10);this.canvas.width=e,this.canvas.height=i}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class w extends l{constructor(t,e,i){super(t,e),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=i,this.createShadows()}createShadows(){this.element.insertAdjacentHTML(\"beforeend\",'<div class=\"stf__outerShadow\"></div>\\n             <div class=\"stf__innerShadow\"></div>\\n             <div class=\"stf__hardShadow\"></div>\\n             <div class=\"stf__hardInnerShadow\"></div>'),this.outerShadow=this.element.querySelector(\".stf__outerShadow\"),this.innerShadow=this.element.querySelector(\".stf__innerShadow\"),this.hardShadow=this.element.querySelector(\".stf__hardShadow\"),this.hardInnerShadow=this.element.querySelector(\".stf__hardInnerShadow\")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText=\"display: none\",this.innerShadow.style.cssText=\"display: none\",this.hardShadow.style.cssText=\"display: none\",this.hardInnerShadow.style.cssText=\"display: none\"}reload(){this.element.querySelector(\".stf__outerShadow\")||this.createShadows()}drawHardInnerShadow(){const t=this.getRect(),e=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let i=(100-e)*(2.5*t.pageWidth)/100+20;i>t.pageWidth&&(i=t.pageWidth);let s=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+5).toString(10)};\\n            width: ${i}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to right,\\n                rgba(0, 0, 0, ${this.shadow.opacity*e/100}) 5%,\\n                rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left+t.width/2}px;\\n            transform-origin: 0 0;\\n        `;s+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?\"transform: translate3d(0, 0, 0);\":\"transform: translate3d(0, 0, 0) rotateY(180deg);\",this.hardInnerShadow.style.cssText=s}drawHardOuterShadow(){const t=this.getRect();let e=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*t.pageWidth)/100+20;e>t.pageWidth&&(e=t.pageWidth);let i=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+4).toString(10)};\\n            width: ${e}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left+t.width/2}px;\\n            transform-origin: 0 0;\\n        `;i+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?\"transform: translate3d(0, 0, 0) rotateY(180deg);\":\"transform: translate3d(0, 0, 0);\",this.hardShadow.style.cssText=i}drawInnerShadow(){const t=this.getRect(),e=3*this.shadow.width/4,i=0===this.getDirection()?e:0,s=0===this.getDirection()?\"to left\":\"to right\",n=this.convertToGlobal(this.shadow.pos),r=this.shadow.angle+3*Math.PI/2,o=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let a=\"polygon( \";for(const t of o){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};e=h.GetRotatedPoint(e,{x:i,y:100},r),a+=e.x+\"px \"+e.y+\"px, \"}a=a.slice(0,-2),a+=\")\";const g=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\\n            width: ${e}px;\\n            height: ${2*t.height}px;\\n            background: linear-gradient(${s},\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,\\n                rgba(0, 0, 0, 0.05) 15%,\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,\\n                rgba(0, 0, 0, 0) 100%);\\n            transform-origin: ${i}px 100px;\\n            transform: translate3d(${n.x-i}px, ${n.y-100}px, 0) rotate(${r}rad);\\n            clip-path: ${a};\\n            -webkit-clip-path: ${a};\\n        `;this.innerShadow.style.cssText=g}drawOuterShadow(){const t=this.getRect(),e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.shadow.angle+3*Math.PI/2,s=1===this.getDirection()?this.shadow.width:0,n=0===this.getDirection()?\"to right\":\"to left\",r=[{x:0,y:0},{x:t.pageWidth,y:0},{x:t.pageWidth,y:t.height},{x:0,y:t.height}];let o=\"polygon( \";for(const t of r)if(null!==t){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};e=h.GetRotatedPoint(e,{x:s,y:100},i),o+=e.x+\"px \"+e.y+\"px, \"}o=o.slice(0,-2),o+=\")\";const a=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\\n            width: ${this.shadow.width}px;\\n            height: ${2*t.height}px;\\n            background: linear-gradient(${n}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));\\n            transform-origin: ${s}px 100px;\\n            transform: translate3d(${e.x-s}px, ${e.y-100}px, 0) rotate(${i}rad);\\n            clip-path: ${o};\\n            -webkit-clip-path: ${o};\\n        `;this.outerShadow.style.cssText=a}drawLeftPage(){\"portrait\"!==this.orientation&&null!==this.leftPage&&(1===this.direction&&null!==this.flippingPage&&\"hard\"===this.flippingPage.getDrawingDensity()?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){null!==this.rightPage&&(0===this.direction&&null!==this.flippingPage&&\"hard\"===this.flippingPage.getDrawingDensity()?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(null===this.bottomPage)return;const t=null!=this.flippingPage?this.flippingPage.getDrawingDensity():null;\"portrait\"===this.orientation&&1===this.direction||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(t))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),null!=this.flippingPage&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),null!=this.shadow&&null!==this.flippingPage&&(\"soft\"===this.flippingPage.getDrawingDensity()?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const t of this.app.getPageCollection().getPages())t!==this.leftPage&&t!==this.rightPage&&t!==this.flippingPage&&t!==this.bottomPage&&(t.getElement().style.cssText=\"display: none\"),t.getTemporaryCopy()!==this.flippingPage&&t.hideTemporaryCopy()}update(){super.update(),null!==this.rightPage&&this.rightPage.setOrientation(1),null!==this.leftPage&&this.leftPage.setOrientation(0)}}class x{constructor(){this._default={startPage:0,size:\"fixed\",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(t){const e=this._default;if(Object.assign(e,t),\"stretch\"!==e.size&&\"fixed\"!==e.size)throw new Error('Invalid size type. Available only \"fixed\" and \"stretch\" value');if(e.width<=0||e.height<=0)throw new Error(\"Invalid width or height\");if(e.flippingTime<=0)throw new Error(\"Invalid flipping time\");return\"stretch\"===e.size?(e.minWidth<=0&&(e.minWidth=100),e.maxWidth<e.minWidth&&(e.maxWidth=2e3),e.minHeight<=0&&(e.minHeight=100),e.maxHeight<e.minHeight&&(e.maxHeight=2e3)):(e.minWidth=e.width,e.maxWidth=e.width,e.minHeight=e.height,e.maxHeight=e.height),e}}!function(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&\"undefined\"!=typeof document){var s=document.head||document.getElementsByTagName(\"head\")[0],n=document.createElement(\"style\");n.type=\"text/css\",\"top\"===i&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}(\".stf__parent {\\n  position: relative;\\n  display: block;\\n  box-sizing: border-box;\\n  transform: translateZ(0);\\n\\n  -ms-touch-action: pan-y;\\n  touch-action: pan-y;\\n}\\n\\n.sft__wrapper {\\n  position: relative;\\n  width: 100%;\\n  box-sizing: border-box;\\n}\\n\\n.stf__parent canvas {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__block {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  box-sizing: border-box;\\n  perspective: 2000px;\\n}\\n\\n.stf__item {\\n  display: none;\\n  position: absolute;\\n  transform-style: preserve-3d;\\n}\\n\\n.stf__outerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__innerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardInnerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\");t.PageFlip=class extends class{constructor(){this.events=new Map}on(t,e){return this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e]),this}off(t){this.events.delete(t)}trigger(t,e,i=null){if(this.events.has(t))for(const s of this.events.get(t))s({data:i,object:e})}}{constructor(t,e){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=(new x).getSettings(e),this.block=t}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(t){this.ui=new u(this.block,this,this.setting);const e=this.ui.getCanvas();this.render=new d(this,this.setting,e),this.flipController=new g(this.render,this),this.pages=new n(this,this.render,t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger(\"init\",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(t){this.ui=new c(this.block,this,this.setting,t),this.render=new w(this,this.setting,this.ui.getDistElement()),this.flipController=new g(this.render,this),this.pages=new o(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger(\"init\",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new n(this,this.render,t),this.pages.load(),this.pages.show(e),this.trigger(\"update\",this,{page:e,mode:this.render.getOrientation()})}updateFromHtml(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new o(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.ui.updateItems(t),this.render.reload(),this.pages.show(e),this.trigger(\"update\",this,{page:e,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(t){this.pages.show(t)}flipNext(t=\"top\"){this.flipController.flipNext(t)}flipPrev(t=\"top\"){this.flipController.flipPrev(t)}flip(t,e=\"top\"){this.flipController.flipToPage(t,e)}updateState(t){this.trigger(\"changeState\",this,t)}updatePageIndex(t){this.trigger(\"flip\",this,t)}updateOrientation(t){this.ui.setOrientationStyle(t),this.update(),this.trigger(\"changeOrientation\",this,t)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(t){return this.pages.getPage(t)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(t){this.mousePosition=t,this.isUserTouch=!0,this.isUserMove=!1}userMove(t,e){this.isUserTouch||e||!this.setting.showPageCorners?this.isUserTouch&&h.GetDistanceBetweenTwoPoint(this.mousePosition,t)>5&&(this.isUserMove=!0,this.flipController.fold(t)):this.flipController.showCorner(t)}userStop(t,e=!1){this.isUserTouch&&(this.isUserTouch=!1,e||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(t)))}},Object.defineProperty(t,\"__esModule\",{value:!0})}));\n"],"sourceRoot":""}